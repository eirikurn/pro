#!/usr/bin/env node

/**
 * Module dependencies.
 */

var prototyper = require('../')
  , program = require('commander');

/**
 * Option parsing
 */
program
  .version(prototyper.version)
  .option('-d, --dir [dir]', 'Serve the specified directory', process.cwd())
  .parse(process.argv);

// Host and port
var host = '0.0.0.0'
  , port = program.args.pop() || '8080'

if (~port.indexOf(':')) {
  port = port.split(':');
  host = port[0];
  port = port[1];
}

var options =
  { host: host
  , port: port
  , dir: program.dir
  };

/**
 * Add node_modules of target path to require list
 */
require.paths.unshift(program.dir + "/node_modules");

/**
 * Start prototyper
 */
prototyper.serve(options);
